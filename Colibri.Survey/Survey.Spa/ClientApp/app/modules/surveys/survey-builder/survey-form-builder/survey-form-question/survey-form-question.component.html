<!-- <pre class='checkquestion'>{{question | json}}</pre> -->
<!-- <p>{{isEditQuestion}}</p> -->
<div *ngIf="!isEditQuestion" class="d-question-wrapper">
    <div class="form-viewr-controls">
        <!-- <p>111{{questionOption.question.controlType}}111</p> -->
        <div [formGroup]="form">
            <label [attr.for]="questionOption.question.id">{{questionOption.question.text}}++++{{questionOption.pageId}}++++
                <label *ngIf="questionOption.question.required" style="color:red">*</label>
            </label>
            <br>
            <p>{{questionOption.question.description}}</p>
            <!-- <label *ngIf="questionOption.question.required" style="color:red">*</label> -->
            <div *ngIf="!!questionOption.question.name">
                {{questionOption.question.name}}
            </div>

            <div [formGroupName]="'id_page1'" [ngSwitch]="questionOption.question.controlType">
                <div *ngSwitchCase="'textbox'" [formGroupName]="questionOption.question.id">
                    <input [formControlName]="'answer'" [id]="questionOption.question.id">
                    <!-- <div [formGroupName]="questionOption.question.id" *ngIf="questionOption.question.isAdditionalAnswer"></div> -->
                    <div *ngIf="questionOption.question.isAdditionalAnswer">
                        additional answer:
                        <input [formControlName]="'additionalAnswer'" type="text">
                    </div>
                </div>


                <div *ngSwitchCase="'textarea'" [formGroupName]="questionOption.question.id">
                    <textarea rows="5" [formControlName]="'answer'" [disabled]="true" [id]="questionOption.question.id" style="width: 300px"></textarea>
                    <div *ngIf="questionOption.question.isAdditionalAnswer">
                        additional answer:
                        <input [formControlName]="'additionalAnswer'" type="text">
                    </div>
                </div>


                <div *ngSwitchCase="'dropdown'" [formGroupName]="questionOption.question.id">
                    <select [id]="questionOption.question.id" [disabled]="true" [formControlName]="'answer'" style="width: 200px">

                        <option *ngFor="let opt of questionOption.question.options" [value]="opt.id">{{opt.value}}</option>
                    </select>
                    <div *ngIf="questionOption.question.isAdditionalAnswer">
                        additional answer:
                        <input [formControlName]="'additionalAnswer'" type="text">
                    </div>
                </div>


                <div *ngSwitchCase="'radio'">
                    <!-- {{questionOption.question.options | json}} -->
                    <div class="form-check" *ngFor="let opt of questionOption.question.options" [formGroupName]="questionOption.question.id">
                        <input [formControlName]="'answer'" name="answer" type="radio" [value]="opt.id">
                        <label class="form-check-label">
                            {{opt.value}}
                        </label>
                    </div>
                    <div [formGroupName]="questionOption.question.id" *ngIf="questionOption.question.isAdditionalAnswer">
                        additional answer:
                        <input [formControlName]="'additionalAnswer'" type="text">
                    </div>
                </div>


                <div *ngSwitchCase="'checkbox'" [formGroupName]="questionOption.question.id">
                    <div *ngFor="let opt of questionOption.question.options">
                        <input type="checkbox" (change)="onChange(questionOption.question.id, opt.id, $event.target.checked)" [checked]="opt.label"> {{opt.value}}
                        <br>
                    </div>
                    <!-- <div class="form-check" *ngFor="let opt of questionOption.question.options">
                                  <input [id]="opt.id"  [formControlName]="questionOption.question.id"   class="form-check-input" type="checkbox" [checked]="opt.value">
                                  <label class="form-check-label">
                                    {{opt.label}}
                                  </label>
                                </div> -->
                    <div *ngIf="questionOption.question.isAdditionalAnswer">
                        additional answer:
                        <input [formControlName]="'additionalAnswer'" type="text">
                    </div>
                </div>



                <div *ngSwitchCase="'gridRadio'" [formGroupName]="questionOption.question.id">
                    <div>
                        <!-- <div [formGroupName]="itemRowLabel.id" *ngFor="let itemRowLabel of questionOption.question.grid.rows let iItemRowLabel=index">
                            <input #val [formControlName]="'label'" name="label" value="itemRowLabel.value"  
                            type='radio'>
                            <input #val [formControlName]="'label'" name="label" value="itemRowLabel.value"  
                            type='radio'>
                            <p>11{{val.checked}}11</p>
                    </div> -->
                        <!-- <table style="border: 1px solid black">
                        <tr style="border: 1px solid black">
                            <td style="border: 1px solid black">////</td>
                            <td *ngFor="let itemColLabel of questionOption.question.grid.cols let iItemColLabel=index" style="border: 1px solid black">
                                {{itemColLabel.value}}
                            </td>
                        </tr>
                        <tr [formGroupName]="itemRowLabel.id" *ngFor="let itemRowLabel of questionOption.question.grid.rows let iItemRowLabel=index" style="border: 1px solid black">
                            <td style="border: 1px solid black">{{itemRowLabel.value}}11 11</td>
                            <td *ngFor="let itemCol of questionOption.question.grid.cols let iItemCol=index" style="border: 1px solid black">
              

                                <input [formControlName]="'label'" value="{{itemCol.id}}" (change)="onChangeGridRadio( itemRowLabel, itemCol, questionOption.question.id, itemRowLabel.value, $event.target.checked)"
                                    type='radio'>
                            </td>
                        </tr>
                    </table> -->
                        <div class="hscroll">

                            <table cellspacing="0" cellpadding="6">
                                <tbody [formGroupName]="'rows'">
                                    <tr>
                                        <td style="width: 25%">
                                            <!-- / -->
                                        </td>
                                        <td class="d-align-right-cell" align="right" *ngFor="let itemColLabel of questionOption.question.grid.cols let iItemColLabel=index">
                                            {{itemColLabel.value}}
                                        </td>
                                    </tr>
                                    <tr [formGroupName]="itemRowLabel.id" *ngFor="let itemRowLabel of questionOption.question.grid.rows let iItemRowLabel=index">
                                        <td class="d-align-right-cell">{{iItemRowLabel + 1}}. {{itemRowLabel.value}}</td>
                                        <td *ngFor="let itemCol of questionOption.question.grid.cols let iItemCol=index">


                                            <input [formControlName]="'label'" value="{{itemCol.id}}" (change)="onChangeGridRadio( itemRowLabel, itemCol, questionOption.question.id, itemRowLabel.value, $event.target.checked)"
                                                type='radio'>
                                        </td>
                                    </tr>
                                </tbody>
                                <tr *ngIf="questionOption.question.isAdditionalAnswer">
                                    <td class="d-align-right-cell">Additional answer:</td>

                                    <td [attr.colspan]="questionOption.question.grid.cols.length">
                                        <textarea rows="3" placeholder="your text..." class="d-cell-input" [formControlName]="'additionalAnswer'" type="text"></textarea>
                                    </td>
                                </tr>

                            </table>

                        </div>
                    </div>
                    <br>
                </div>



                <!-- <div *ngSwitchCase="'gridRadio'" [formGroupName]="questionOption.question.id">
                <table [formGroupName]="'answer'">
                    <tr>
                        <td>////</td>
                        <td *ngFor="let itemColLabel of questionOption.question.grid.cols let iItemColLabel=index">
                            {{itemColLabel.value}}
                        </td>
                    </tr>
                    <tr *ngFor="let itemRowLabel of questionOption.question.grid.rows let iItemRowLabel=index">
                        <td>{{itemRowLabel.value}}</td>
                        <td *ngFor="let itemCol of questionOption.question.grid.cols let iItemCol=index">
                            <input name="{{itemRowLabel.id}}"  (change)="onChangeGridRadio( itemRowLabel, itemCol, questionOption.question.id, itemRowLabel.value, $event.target.checked)"
                                type='radio' >
                        </td>
                    </tr>
                </table>
                <br>
            </div> -->

            </div>
        </div>
    </div>
</div>



<div *ngIf="isEditQuestion" class="d-question-wrapper ">
    <div class="form-builder-controls">
        <div *ngIf="!!questionOption.question.name">
            {{questionOption.question.name}}
        </div>

        <div [ngSwitch]="questionOption.question.controlType">
            <div *ngSwitchCase="'textbox'">
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>

                </div>

                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>
                <br>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text"></p>
                    </div>
                    <div class="d-item-content">
                        <input class="d-input-textbox" disabled="true" value="">
                    </div>
                </div>


            </div>


            <div *ngSwitchCase="'textarea'">

                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>

                </div>

                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>
                <br>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text"></p>
                    </div>
                    <div class="d-item-content">
                        <textarea class="d-input-textarea" disabled="true"></textarea>
                    </div>
                </div>


            </div>


            <div *ngSwitchCase="'dropdown'">
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>

                </div>

                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>
                <br>
                <div class="d-item-wrapper" *ngFor="let item of questionOption.question.options; let i = index;">
                    <div class="d-item-label">
                        <p class="d-label-text">Item {{i + 1}}</p>
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">

                            <input autofocus #inputCol class="d-input-textbox" [type]="text" [(ngModel)]="item.value" (keyup)="item.value = $event.target.value">
                            <button *ngIf="questionOption.question.options.length > 1" (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                            <!-- <input *ngIf="last" placeholder="Add new item..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id); Setfocus(questionOption.question.id)" >  -->
                        </div>
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <input placeholder="Add new item..." class="d-input-textbox" (click)="addItem(questionOption.question.options); $event.preventDefault()">
                            <!-- target -->
                        </div>
                    </div>
                </div>
                <!-- question:
                <input [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                <br> description:
                <input [type]="text" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value">
                <p>--------------------------------------------------</p>
                <div *ngFor="let opt of questionOption.question.options; let i = index">
                    <input [type]="text" [(ngModel)]="opt.value" (keyup)="opt.value = $event.target.value">
                    <button (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                </div>
                <button (click)="addItem(questionOption.question.options)" type="button">Add item</button>
                <br>
                <p *ngIf="questionOption.question.isAdditionalAnswer">!!!!! Additional answer !!!!!</p> -->
            </div>


            <div *ngSwitchCase="'radio'">
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>

                <br>
                <div class="d-item-wrapper" *ngFor="let item of questionOption.question.options; let i = index;">
                    <div class="d-item-label">
                        <p class="d-label-text">Item {{i + 1}}</p>
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <button class="d-button-radio">
                                <i class="fa fa-circle-o"></i>
                            </button>

                            <input autofocus #inputCol class="d-input-textbox" [type]="text" [(ngModel)]="item.value" (keyup)="item.value = $event.target.value">
                            <button *ngIf="questionOption.question.options.length > 1" (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                            <!-- <input *ngIf="last" placeholder="Add new item..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id); Setfocus(questionOption.question.id)" >  -->
                        </div>
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">

                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <button class="d-button-radio" style="color:transparent">
                                <i class="fa fa-circle-o"></i>
                            </button>
                            <input placeholder="Add new item..." class="d-input-textbox" (click)="addItem(questionOption.question.options); $event.preventDefault()">
                            <!-- target -->
                        </div>
                    </div>
                </div>
                <!-- question:
                <input [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                <br> description:
                <input [type]="text" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value">
                <div *ngFor="let opt of questionOption.question.options; let i = index">
                    <input [type]="text" [(ngModel)]="opt.value" (keyup)="opt.value = $event.target.value">
                    <button (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                </div>
                <button (click)="addItem(questionOption.question.options)" type="button">Add item</button>
                <br>
                <p *ngIf="questionOption.question.isAdditionalAnswer">!!!!! Additional answer !!!!!</p> -->
            </div>


            <div *ngSwitchCase="'checkbox'">
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>

                <br>
                <div class="d-item-wrapper" *ngFor="let item of questionOption.question.options; let i = index;">
                    <div class="d-item-label">
                        <p class="d-label-text">Item {{i + 1}}</p>
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <button class="d-button-checkbox">
                                <i class="fa fa-square-o"></i>
                            </button>


                            <input autofocus #inputCol class="d-input-textbox" [type]="text" [(ngModel)]="item.value" (keyup)="item.value = $event.target.value">
                            <button *ngIf="questionOption.question.options.length > 1" (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                            <!-- <input *ngIf="last" placeholder="Add new item..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id); Setfocus(questionOption.question.id)" >  -->
                        </div>
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">

                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <button class="d-button-radio" style="color:transparent">
                                <i class="fa fa-circle-o"></i>
                            </button>
                            <input placeholder="Add new item..." class="d-input-textbox" (click)="addItem(questionOption.question.options); $event.preventDefault()">
                            <!-- target -->
                        </div>
                    </div>
                </div>
                <!-- question:
                <input [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                <br> description:
                <input [type]="text" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value">
                <div *ngFor="let opt of questionOption.question.options; let i = index">
                    <input [type]="text" [(ngModel)]="opt.value" (keyup)="opt.value = $event.target.value">
                    <button (click)="deleteItem(i, questionOption.question.options)" type="button">x</button>
                </div>
                <button (click)="addItem(questionOption.question.options)" type="button">Add item</button>
                <br>
                <p *ngIf="questionOption.question.isAdditionalAnswer">!!!!! Additional answer !!!!!</p> -->
            </div>


            <div *ngSwitchCase="'gridRadio'">
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Question text:</p>
                    </div>
                    <div class="d-item-content">
                        <input autofocus class="d-input-textbox" [type]="text" [(ngModel)]="questionOption.question.text" (keyup)="questionOption.question.text = $event.target.value">
                    </div>

                </div>

                <div class="d-item-wrapper">
                    <div class="d-item-label">
                        <p class="d-label-text">Description:</p>
                    </div>
                    <div class="d-item-content">
                        <textarea #toFocus rows="3" class="d-input-textarea" [(ngModel)]="questionOption.question.description" (keyup)="questionOption.question.description = $event.target.value"></textarea>
                    </div>
                </div>
                <br>
                <div class="d-item-wrapper" *ngFor="let row of questionOption.question.grid.rows; let i = index; last as isLast;">
                    <div class="d-item-label">
                        <p class="d-label-text">Row {{i + 1}} {{row.required}}</p>
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <input autofocus #inputRow class="d-input-textbox" [type]="text" [(ngModel)]="row.value" (keyup)="row.value = $event.target.value">
                            <button *ngIf="questionOption.question.grid.rows.length > 1" (click)="deleteRow(row, i, questionOption.question.grid.rows)" type="button">x</button>
                            <!-- <input *ngIf="last" placeholder="Add new item..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id); Setfocus(questionOption.question.id)"> -->
                        </div>
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <input placeholder="Add new row..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id)">
                            <!-- target -->
                        </div>
                    </div>
                </div>



                <br>
                <div class="d-item-wrapper" *ngFor="let col of questionOption.question.grid.cols; let i = index;">
                    <div class="d-item-label">
                        <p class="d-label-text">Col {{i + 1}}</p>
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <input autofocus #inputCol class="d-input-textbox" [type]="text" [(ngModel)]="col.value" (keyup)="col.value = $event.target.value">
                            <button *ngIf="questionOption.question.grid.cols.length > 1" (click)="deleteItem(i, questionOption.question.grid.cols)" type="button">x</button>
                            <!-- <input *ngIf="last" placeholder="Add new item..." class="d-input-textbox" (click)="addRow(questionOption.question.grid.rows, questionOption.question.id); Setfocus(questionOption.question.id)" >  -->
                        </div>
                    </div>
                </div>
                <div class="d-item-wrapper">
                    <div class="d-item-label">
                    </div>
                    <div class="d-item-content">
                        <div class="d-repeat-item">
                            <input placeholder="Add new col..." class="d-input-textbox" (click)="addItem(questionOption.question.grid.cols); $event.preventDefault()">
                            <!-- target -->
                        </div>
                    </div>
                </div>

                <!-- rows:
                <br>
                <div *ngFor="let row of questionOption.question.grid.rows; let i = index">
                    <input [type]="text" [(ngModel)]="row.value" (keyup)="row.value = $event.target.value">
                    <button (click)="deleteItem(i, questionOption.question.grid.rows)" type="button">x</button>
                </div>
                <button (click)="addRow(questionOption.question.grid.rows, questionOption.question.id)" type="button">Add row</button>
                <br> -->

                <!-- <p>--------------------------------------------------------- </p>
                cols:
                <br>
                <div *ngFor="let col of questionOption.question.grid.cols; let i = index">

                    <input [type]="text" [(ngModel)]="col.value" (keyup)="col.value = $event.target.value">
                    <button (click)="deleteItem(i, questionOption.question.grid.cols)" type="button">x</button>
                </div>
                <button (click)="addItem(questionOption.question.grid.cols)" type="button">Add col</button>
                <br>
                <p *ngIf="questionOption.question.isAdditionalAnswer">!!!!! Additional answer !!!!!</p> -->

            </div>

            <!-- <div [formGroupName]="questionOption.question.id" *ngIf="questionOption.question.isAdditionalAnswer">
                additional answer:
                <input [formControlName]="'additionalAnswer'" type="text">
            </div> -->
        </div>
    </div>
</div>